<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">    
    <title>DEMO: StromDAO/Business Object/MeterPoint</title>

    <link href="css/bootstrap.min.css" rel="stylesheet">
  </head>
  <body>
	<div class="container">
    <h1>/store</h1>
	<div class="row">
		<div class="col-md-6">
			<h2>Eingabe</h2>
			<div class="form-group">		
				<label for="txt_mpid">Zählpunkt Kennung:</label><br/>
				<input type="text" id="txt_mpid" name="txt_mpid" class="form-control"><br/>
				<label for="txt_reading">Ablesung:</label><br/>
				<input type="number" id="txt_reading" name="txt_reading" class="form-control"><br/>
				<button id="btn_store" class="btn btn-default">/store</button>
			</div>
		</div>
		<div class="col-md-6">
			<h2>Ausgabe</h2>
			<div class="panel panel-default">
			  <div class="panel-body" id="store_output">
				
			  </div>
			</div>
		</div>
	</div>
	</div>
	
    <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
    <script src="js/jquery-3.2.1.min.js"></script>
    <!-- Include all compiled plugins (below), or include individual files as needed -->
    <script src="js/bootstrap.min.js"></script>
	
	<script>
	function updateTxt(el,txt) {
		$(el).html("<pre>"+txt+"</pre>");
	}
	$('#btn_store').click(
			function() {
				var txt="";
				updateTxt('#store_output',txt);
				
				var url = "/store?mpid="+$('#txt_mpid').val()+"&reading="+$('#txt_reading').val();
				txt+="Sende:\n"+url+"\n\n";
				updateTxt('#store_output',txt);
				$.getJSON(url,function(data) {
						txt+="Empfange:\n";
						txt+="- MPID:"+data.mpid+"\n";
						txt+="- Address:"+data.address+"\n";
						txt+="- TX:"+data.tx+"\n";
						//txt+=JSON.stringify(data);
						updateTxt('#store_output',txt);
						console.log(data);
				});
				
			}
	);
	</script>
  </body>
</html>